export default({rc,meta={},redirect='',rootFile='views'})=>{let Routers=[];rc.keys().map(fileName=>{let name='';let len=fileName.match(/\//g).length;if(len===1){name=fileName.substr(2).split('.vue')[0];let obj={name,path:'/'+name,component:()=>import('@/'+rootFile+fileName.substr(1))};if(meta[name])obj.meta=meta[name];Routers.push(obj);}else if(len===2){name=fileName.split(/\//g)[1];let cname=fileName.split(/\//g)[2].split('.')[0];let rObj=Routers.find(r=>r.name===name);if(rObj){let obj={name:cname,path:cname,component:()=>import('@/'+rootFile+fileName.substr(1))};if(Array.isArray(rObj.children)){rObj.children.push(obj);}else{rObj.children=[obj];}}else{let obj={name:cname,path:'/'+cname,component:()=>import('@/'+rootFile+fileName.substr(1))};if(meta[name])obj.meta=meta[name];Routers.push(obj);}}});if(redirect)Routers.unshift({path:'/',redirect});return Routers;};
